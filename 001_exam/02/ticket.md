# Экзаменационный билет №2

## Задание

### Вопрос 1 

Понятие сокета, виды сокетов.

### Вопрос 2 

Перечислите основные способы адресации данных в языках ассемблера.

### Практическое задание

Разработать shell-скрипт, реализующий получение IP-адреса выходной ноды СОП интернет для текущей машины.

## Ответы

### Ответ 1 

Сокет (socket) — это абстракция, предоставляемая операционной системой для взаимодействия процессов между собой через сеть или в пределах одного компьютера. Это конечная точка для связи, позволяющая программам отправлять и получать данные. Если представить сеть как систему труб для передачи данных, то сокет — это «кран» или «клапан», через который приложения подключаются к этой системе.

Представьте, что вы хотите позвонить другу:

У вас есть телефон (ваша программа)

У друга есть телефон (другая программа где-то в сети)

Чтобы позвонить, вам нужен телефонный аппарат с розеткой для подключения к телефонной сети

Сокет — это и есть эта "розетка" + правила её использования. Это не физический объект, а программный интерфейс, который ОС даёт вашей программе, чтобы она могла "воткнуть вилку" в сеть и начать общение.

Классификация по роли в соединении:

1. Главный (слушающий, passive) сокет

Суть: Специальный сокет, который не передает данные, а только принимает новые входящие соединения. Это "приёмная" сервера.

Характеристики:

- Создается один раз при запуске сервера
- Работает постоянно в фоновом режиме
- Выполняет только listen() и accept()
- Не участвует в передаче данных приложения
- Чаще всего привязан к известному порту (например, 80 для HTTP)

Аналогия: Дежурный администратор в отеле, который только регистрирует новых гостей и направляет их к конкретным номерам.

2. Рабочий (клиентский, active) сокет

Суть: Сокет для фактической передачи данных между клиентом и сервером.

Характеристики:

- Создается автоматически при accept() на стороне сервера
- Или создается при connect() на стороне клиента
- Используется для send()/recv()
- Каждое соединение имеет свой уникальный рабочий сокет
- Закрывается после завершения обмена данными

Аналогия: Конкретный телефонный аппарат для разговора между двумя людьми.

### Ответ 2


1. Прямая (абсолютная) адресация

Суть: Адрес операнда явно указан в команде как числовая константа

```assembly
mov ax, [0x1234]    ; Загрузить в AX содержимое ячейки по адресу 0x1234
mov byte [0x500], 5 ; Записать 5 в ячейку по адресу 0x500
```

Особенности:

- Адрес фиксирован, не зависит от регистров
- Используется для доступа к глобальным переменным с известными адресами
- В защищенном режиме может требовать специальных директив

2. Косвенная (регистровая) адресация

Суть: Адрес операнда содержится в регистре

```assembly
mov ax, [bx]      ; Адрес в регистре BX
mov [si], dl      ; Записать DL по адресу в SI
```

Варианты:

- Косвенная базовая: `[BX]`, `[BP]` (в x86)
- Косвенная индексная: `[SI]`, `[DI]`

Применение: Работа с указателями, динамическими структурами данных

3. Базовая (база + смещение) адресация

Суть: Адрес = содержимое базового регистра + постоянное смещение

```assembly
mov ax, [bx+10]   ; Адрес = BX + 10
mov [bp-4], cx    ; Адрес = BP - 4
```

Использование:

- Доступ к локальным переменным в стеке (через BP/EBP/RBP)
- Обращение к полям структур
- Параметры функций

4. Индексная адресация
Суть: Адрес = содержимое индексного регистра * масштабный коэффициент + смещение

```assembly
mov ax, [si*2 + 100]    ; Для 16-битных элементов массива
mov eax, [edi*4 + array]; Для 32-битных элементов (x86)
```

Масштабирование:

- 1 — для байтовых массивов
- 2 — для 16-битных (слово)
- 4 — для 32-битных (двойное слово)
- 8 — для 64-битных (учетверенное слово)

5. Базовая индексная адресация

Суть: Адрес = база + индекс + смещение. Наиболее гибкий способ

```assembly
mov ax, [bx + si + 10]        ; 16-битный режим
mov eax, [ebx + esi*4 + 20]   ; 32-битный с масштабированием
```

Применение:

- Доступ к элементам двумерных массивов: `array[строка][столбец]`
- Сложные структуры данных
- Таблицы с переменным размером элементов

### 6. Относительная адресация

Суть: Адрес = текущее значение счетчика команд (IP/EIP/RIP) + смещение

```assembly
jmp near $+10     ; Переход на 10 байт вперед
call subroutine   ; Адрес подпрограммы вычисляется относительно IP
```

Особенности:

- Используется для переходов и вызовов
- Создает перемещаемый код (position-independent code, PIC)
- Смещение может быть со знаком (вперед/назад)
- В x86-64: RIP-относительная адресация для данных
